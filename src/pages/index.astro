---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Header from "@/components/Header.astro";
import ConfigToolbar from "@/components/ConfigToolbar";
import KeyboardContainer from "@/components/KeyboardContainer";
import Footer from "@/components/Footer";
import AnalyticsContainer from "@/components/analytics/AnalyticsContainer.astro";
import BottomToolbar from "@/components/toolbar/BottomToolbar";

// Explicitly set canonical URL for homepage
const canonicalURL = new URL("/", Astro.site || Astro.url.origin).href;
---

<BaseLayout
    title="NinjaType - Minimalist Typing Practice | Improve Your WPM"
    description="Master touch typing with NinjaType. Track your words per minute (WPM), analyze performance with real-time charts, and practice with a clean, distraction-free interface. Free online typing test and trainer."
    canonical={canonicalURL}
>
    <div id="body-container">
        <Header />

        <main>
            <div id="main-container">
                <ConfigToolbar client:load />
                <KeyboardContainer client:load />
                <!-- <BottomToolbar client:load /> -->
            </div>
            <AnalyticsContainer />
            <BottomToolbar client:load />
        </main>

        <Footer />
    </div>
</BaseLayout>
<script>
    import { $kbState, $kbTypingState } from "@/store/keyboard";

    $kbState.subscribe((state) => {
        document.body.setAttribute("data-kb-state", state.toString());
    });

    $kbTypingState.subscribe((typingState) => {
        document.body.setAttribute(
            "data-kb-typing-state",
            typingState.toString()
        );
    });
</script>
<script src="https://code.iconify.design/iconify-icon/3.0.0/iconify-icon.min.js"
></script>
