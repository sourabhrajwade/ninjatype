---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Header from "@/components/Header.astro";
import ConfigToolbar from "@/components/ConfigToolbar";
import KeyboardContainer from "@/components/KeyboardContainer";
import Footer from "@/components/Footer";
import AnalyticsContainer from "@/components/analytics/AnalyticsContainer.astro";
import BottomToolbar from "@/components/toolbar/BottomToolbar";
import FAQ from "@/components/seo/FAQ";
import { mainPageFAQs } from "@/constants/faq";

// Explicitly set canonical URL for homepage
const canonicalURL = new URL("/", Astro.site || Astro.url.origin).href;
---

<BaseLayout
    title="Free Online Typing Test - Practice & Improve Your Typing Speed WPM | NinjaType"
    description="Take a free online typing speed test with NinjaType. Improve your WPM (words per minute), track accuracy, and master touch typing with our minimalist typing practice platform. No registration required - start typing now!"
    canonical={canonicalURL}
>
    <div id="body-container">
        <Header />

        <main>
            <div id="main-container">
                <ConfigToolbar client:load />
                <KeyboardContainer client:load />
            </div>
            <AnalyticsContainer />
            <BottomToolbar client:load />
            <FAQ faqs={mainPageFAQs} client:load />
        </main>

        <Footer />
    </div>
</BaseLayout>
<script>
    import { $kbState, $kbTypingState } from "@/store/keyboard";

    $kbState.subscribe((state) => {
        document.body.setAttribute("data-kb-state", state.toString());
    });

    $kbTypingState.subscribe((typingState) => {
        document.body.setAttribute(
            "data-kb-typing-state",
            typingState.toString()
        );
    });
</script>
