---
import type { GetStaticPaths } from "astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Footer from "@/components/Footer";
import Header from "@/components/Header.astro";
import { getCollection } from "astro:content";
import { render } from "astro:content";
import ArticleSchema from "@/components/seo/ArticleSchema.astro";

export const getStaticPaths = (async () => {
    const contentList = await getCollection("content");

    return contentList.map((content) => ({
        params: { mdid: content.id },
        props: { content },
    }));
}) satisfies GetStaticPaths;

const { content } = Astro.props;
const { Content } = await render(content);

// Capitalize first letter for title
const pageTitle = content.id.charAt(0).toUpperCase() + content.id.slice(1);
const description = `Learn more about NinjaType - ${pageTitle}. A minimalist typing practice platform.`;

// Generate canonical URL for this page
const canonicalURL = new URL(`/${content.id}/`, Astro.site || Astro.url.origin)
    .href;
---

<BaseLayout
    title={`${pageTitle} - NinjaType`}
    description={description}
    canonical={canonicalURL}
    type="article"
>
    <link
        slot="head"
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0&icon_names=fiber_manual_record"
    />

    <ArticleSchema
        title={`${pageTitle} - NinjaType`}
        description={description}
        author="NinjaType Team"
        publishDate={new Date().toISOString()}
        image={new URL("/favicon/favicon.svg", Astro.site || Astro.url).href}
        url={Astro.url.href}
    />

    <div id="body-container">
        <Header />
        <main>
            <div id="main-md-container">
                <Content />
            </div>
        </main>
        <Footer />
    </div>
</BaseLayout>
